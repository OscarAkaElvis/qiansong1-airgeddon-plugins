var componentObj=function(){this.alarmDialog=new Dialog({title:label.confirmTitle,content:"",size:Dialog.SIZE.SMALL,hasCloseIcon:!0,closeIconHandle:function(){null!=alarmDialog.clickCallback&&"function"==typeof alarmDialog.clickCallback&&alarmDialog.clickCallback()},isConstant:!0,type:Dialog.TYPE.ALARM,bottom:[{type:component.Button.TYPE.PRIMARY,text:btn.knowIt,id:"alarmSubmit",onClick:function(){$(alarmDialog.container).find(".dlgCloseBtn")[0].click()}}]});this.alarmDialog.clickCallback=null;this.alarmDialog.show=
function(a){void 0!=a&&("string"==typeof a?(this._resetContent(a),this.clickCallback=null,this._ops.bottom[0].obj._init({text:btn.knowIt})):$.isPlainObject(a)&&(void 0!=a.title&&"string"==typeof a.title?$(this.container).find("div.dialogTitle span").html(a.title):$(this.container).find("div.dialogTitle span").html(label.confirmTitle),void 0!=a.content&&"string"==typeof a.content?this._resetContent(a.content):this._resetContent(""),this.clickCallback=void 0!=a.callback&&"function"==typeof a.callback?
a.callback:null,this._ops.bottom[0].obj._init({text:"string"==typeof a.buttonStr?a.buttonStr:btn.knowIt})),Dialog.prototype.show.call(this))};this.confirmDialog=new Dialog({title:label.confirmTitle,content:"",size:Dialog.SIZE.SMALL,hasCloseIcon:!0,type:Dialog.TYPE.NORMAL,isConstant:!0,closeIconHandle:function(){confirmDialog.hide(function(){"function"==typeof confirmDialog.clickCallback&&confirmDialog.clickCallback(confirmDialog.isCloseHandleBindSubmit)})},bottom:[{type:component.Button.TYPE.SECONDARY,
text:btn.cancelTip,id:"confirmCancel",onClick:function(){confirmDialog.hide(function(){"function"==typeof confirmDialog.clickCallback&&confirmDialog.clickCallback(!1)})}},{type:component.Button.TYPE.PRIMARY,text:btn.confirmTip,id:"confirmSubmit",onClick:function(){confirmDialog.hide(function(){"function"==typeof confirmDialog.clickCallback&&confirmDialog.clickCallback(!0)})}}]});this.confirmDialog.clickCallback=null;this.confirmDialog.isCloseHandleBindSubmit=!1;this.confirmDialog.show=function(a){void 0!=
a&&$.isPlainObject(a)&&(void 0!=a.title&&"string"==typeof a.title?$(this.container).find("div.dialogTitle span").html(a.title):$(this.container).find("div.dialogTitle span").html(label.confirmTitle),void 0!=a.content&&"string"==typeof a.content&&$(this.container).find("div.dialogContent span").html(a.content),void 0!=a.button?(this._ops.bottom[0].obj._init({text:"string"==typeof a.button.cancelStr?a.button.cancelStr:btn.cancelTip}),this._ops.bottom[1].obj._init({text:"string"==typeof a.button.confirmStr?
a.button.confirmStr:btn.confirmTip})):(this._ops.bottom[0].obj._init({text:btn.cancelTip}),this._ops.bottom[1].obj._init({text:btn.confirmTip})),this.isCloseHandleBindSubmit=void 0!=a.isCloseHandleBindSubmit?a.isCloseHandleBindSubmit:!1,void 0!=a.callback&&(this.clickCallback=a.callback));Dialog.prototype.show.call(this)};this.loadingDialog=new Dialog({title:label.confirmTitle,size:Dialog.SIZE.SMALL,hasCloseIcon:!0,type:Dialog.TYPE.LOADING,isConstant:!0,content:{primary:"",secondary:""}});this.loadingDialog.timeHandler=
null;this.loadingDialog.show=function(a,b,d,c,e){void 0!=a&&$.isPlainObject(a)&&(void 0!=a.title&&"string"==typeof a.title?$(this.container).find("div.dialogTitle span").html(a.title):$(this.container).find("div.dialogTitle span").html(label.confirmTitle),void 0==a.content||$.isEmptyObject(a.content)||(a.content.primary=void 0==a.content.primary?"":a.content.primary,a.content.secondary=void 0==a.content.secondary?"":a.content.secondary,$(this.container).find("div.dialogContent span.primary").html(a.content.primary),
$(this.container).find("div.dialogContent span.secondary").html(a.content.secondary)));void 0!=c&&!0==c?$(this.container).find(".dlgCloseBtn").css("display","block"):$(this.container).find(".dlgCloseBtn").css("display","none");this._ops.closeIconHandle="function"==typeof e?e:null;clearTimeout(this.timeHandler);"function"==typeof b&&void 0!=d&&0<d&&(this.timeHandler=$.setTimeout(b,d));Dialog.prototype.show.call(this)};this.timePeriodDialog=new Dialog({title:label.addTimePeriod,content:'<div id="timeDescCon" class="timePeriodCon"></div><div id="timeStartCon" class="timePeriodCon timePeriodTimeInput"></div><div id="timeEndCon" class="timePeriodCon timePeriodTimeInput"></div><div class="timePeriodCon"><ul class="inputCMPT medium"><label class="outerLbl">'+
label.everyWeek+label.repeat+'</label><div id="dayChoose"><div id="mon" class="timePeriodDayChoose"></div><div id="tue" class="timePeriodDayChoose"></div><div id="wed" class="timePeriodDayChoose"></div><div id="thu" class="timePeriodDayChoose"></div><div id="fri" class="timePeriodDayChoose"></div><div id="sat" class="timePeriodDayChoose"></div><div id="sun" class="timePeriodDayChoose"></div></div></ul></div>',hasCloseIcon:!0,size:Dialog.SIZE.SMALL,type:Dialog.TYPE.CUSTOM,isConstant:!0,bottom:[{type:component.Button.TYPE.SECONDARY,
text:btn.cancel,id:"timePeriodCancel",onClick:function(){timePeriodDialog.hide()}},{type:component.Button.TYPE.PRIMARY,text:"确定",id:"timePeriodSubmit",onClick:function(){var a=!0,b={};[timePeriodDialog.timeDesc,timePeriodDialog.timeStartHour,timePeriodDialog.timeStartMin,timePeriodDialog.timeEndHour,timePeriodDialog.timeEndMin].forEach(function(b){a=b.checkAll()&&a});if(a){var d=timePeriodDialog.timeStartHour.getValue(),c=timePeriodDialog.timeStartMin.getValue(),e=timePeriodDialog.timeEndHour.getValue(),
f=timePeriodDialog.timeEndMin.getValue();b.mode=timePeriodDialog.mode;b.index=timePeriodDialog.timePeriodIndex;null!=timePeriodDialog.timePeriodArrayIndex&&(b.arrayIndex=timePeriodDialog.timePeriodArrayIndex);null!=timePeriodDialog.timePeriodItemName&&(b.itemName=timePeriodDialog.timePeriodItemName);b.name=timePeriodDialog.timeDesc.getValue();b.startHour=d;b.startMin=c;b.endHour=e;b.endMin=f;b.mon=timePeriodDialog.dayMon.getValue();b.tue=timePeriodDialog.dayTue.getValue();b.wed=timePeriodDialog.dayWed.getValue();
b.thu=timePeriodDialog.dayThu.getValue();b.fri=timePeriodDialog.dayFri.getValue();b.sat=timePeriodDialog.daySat.getValue();b.sun=timePeriodDialog.daySun.getValue();!1==b.mon&&!1==b.tue&&!1==b.wed&&!1==b.thu&&!1==b.fri&&!1==b.sat&&!1==b.sun?showToast(errStr.timePeriodMustSelectDay):$(timePeriodDialog).trigger("ev_timePeriodCommit",[b])}}}],renderCallBack:function(){function a(){if(""==this.input.value||!checkNum(this.input.value))return this.showNote(errStr.inputNum),!1;checkNumRange(this.input.value,
23,0)||this.setValue(23);2>this.input.value.length&&this.setValue("0"+this.input.value);return d.call(this)}function b(){if(""==this.input.value||!checkNum(this.input.value))return this.showNote(errStr.inputNum),!1;checkNumRange(this.input.value,59,0)||this.setValue(59);2>this.input.value.length&&this.setValue("0"+this.input.value);return d()}function d(){if(c.timeType==c.TIME_TYPE.POINT)return!0;var a=parseInt(c.timeStartHour.getValue(),10),b=parseInt(c.timeStartMin.getValue(),10),d=parseInt(c.timeEndHour.getValue(),
10),e=parseInt(c.timeEndMin.getValue(),10),a=60*a+b-(60*d+e);if(c.acrossDay)if(0<a)$("#timePeriodAcrossDay").css("display","inline-block");else{if(0==a)return c.timeEndMin.state!=Input.STATE.ERROR&&(id("timePeriodRuleTips").innerHTML=c.errorStr.END_TIME_EQUAL_START_TIME,$("#timePeriodRuleTipsCon").css("left",$(c.timeEndMin.dom).css("width")),$("#timePeriodRuleTipsCon").css("display","table-cell")),!1;$("#timePeriodAcrossDay").css("display","none")}else{$("#timePeriodAcrossDay").css("display","none");
if(0<a)return c.timeEndMin.state!=Input.STATE.ERROR&&(id("timePeriodRuleTips").innerHTML=c.errorStr.END_TIME_SHOULD_EARLY_START_TIME,$("#timePeriodRuleTipsCon").css("left",$(c.timeEndMin.dom).css("width")),$("#timePeriodRuleTipsCon").css("display","table-cell")),!1;if(0==a)return c.timeEndMin.state!=Input.STATE.ERROR&&(id("timePeriodRuleTips").innerHTML=c.errorStr.END_TIME_EQUAL_START_TIME,$("#timePeriodRuleTipsCon").css("left",$(c.timeEndMin.dom).css("width")),$("#timePeriodRuleTipsCon").css("display",
"table-cell")),!1}$("#timePeriodRuleTipsCon").css("display","none");return!0}var c=this,e,f;c.timeDesc=new Input({type:Input.TYPE.PLAIN_TEXT,targetId:"timeDescCon",label:{value:label.periodDesc},check:{blur:function(){return 0==this.input.value.length?(this.showNote(errStr.inputTimePeriodBlank),!1):checkInputName(this.input.value,32,1)!=ENONE?(this.showNote(errStr.inputTimePeriodTooLong),!1):!0}},props:{maxlength:"32",type:"text"}});c.timeStartHour=new Input({type:Input.TYPE.PLAIN_TEXT,targetId:"timeStartCon",
label:{value:label.beginTime},tips:{value:label.hour,className:"unit"},check:{blur:a},props:{maxlength:"2",type:"text"}});c.timeStartMin=new Input({type:Input.TYPE.PLAIN_TEXT,targetId:"timeStartCon",tips:{value:label.minute,className:"unit"},check:{blur:b},props:{maxlength:"2",type:"text"}});$(c.timeStartMin.dom).css("marginLeft","12px");c.timeEndHour=new Input({type:Input.TYPE.PLAIN_TEXT,targetId:"timeEndCon",label:{value:label.endTime},check:{blur:a},tips:{value:label.hour,className:"unit"},props:{maxlength:"2",
type:"text"}});c.timeEndMin=new Input({type:Input.TYPE.PLAIN_TEXT,targetId:"timeEndCon",tips:{value:label.minute,className:"unit"},check:{blur:b},props:{maxlength:"2",type:"text"}});$(c.timeEndMin.dom).css("marginLeft","12px");e=document.createElement("span");e.className="timePeriodAcrossDay";e.id="timePeriodAcrossDay";e.innerHTML=label.timePeriodNextDay;id("timeEndCon").appendChild(e);f=document.createElement("li");f.id="timePeriodRuleTipsCon";f.className="note";f.style.display="none";c.timeEndMin.dom.appendChild(f);
e=document.createElement("div");e.className="noteCon";f.appendChild(e);f=document.createElement("p");f.id="timePeriodRuleTips";e.appendChild(f);this.dayMon=new CheckBox({targetId:"mon",label:label.one});this.dayTue=new CheckBox({targetId:"tue",label:label.two});this.dayWed=new CheckBox({targetId:"wed",label:label.three});this.dayThu=new CheckBox({targetId:"thu",label:label.four});this.dayFri=new CheckBox({targetId:"fri",label:label.five});this.daySat=new CheckBox({targetId:"sat",label:label.six});
this.daySun=new CheckBox({targetId:"sun",label:label.day})}});this.timePeriodDialog.timePeriodIndex=null;this.timePeriodDialog.timePeriodArrayIndex=null;this.timePeriodDialog.timePeriodItemName=null;this.timePeriodDialog.mode=null;this.timePeriodDialog.timeType=null;this.timePeriodDialog.show=function(a){var b=[this.timeDesc,this.timeStartHour,this.timeStartMin,this.timeEndHour,this.timeEndMin];if(void 0!=a){for(var d=0;d<b.length;d++)b[d].closeNote();$("#timePeriodRuleTipsCon").css("display","none");
this.mode=a.mode;this.timePeriodIndex=a.index;this.timePeriodArrayIndex=a.arrayIndex?a.arrayIndex:null;this.timePeriodItemName=a.itemName?a.itemName:null;this.timeDesc.setValue(a.name||"");this.timeStartHour.setValue(a.startHour||"00");this.timeStartMin.setValue(a.startMin||"00");this.timeEndHour.setValue(a.endHour||"00");this.timeEndMin.setValue(a.endMin||"00");this.dayMon.setValue(a.mon);this.dayTue.setValue(a.tue);this.dayWed.setValue(a.wed);this.dayThu.setValue(a.thu);this.dayFri.setValue(a.fri);
this.daySat.setValue(a.sat);this.daySun.setValue(a.sun);this.acrossDay?60*parseInt(a.startHour,10)+parseInt(a.startMin,10)>60*parseInt(a.endHour,10)+parseInt(a.endMin,10)?$("#timePeriodAcrossDay").css("display","inline-block"):$("#timePeriodAcrossDay").css("display","none"):$("#timePeriodAcrossDay").css("display","none");Dialog.prototype.show.call(this)}};this.timePeriodDialog.resetCommit=function(a){if("function"==typeof a)$(this).off("ev_timePeriodCommit").on("ev_timePeriodCommit",function(b,d){a(d)})};
this.timePeriodDialog.resetTpType=function(a){switch(a){case this.tpType.TIME_SWITCH:this.timeType=this.TIME_TYPE.PERIOD;this.timeEndHour.disable(!1);this.timeEndHour.dom.style.display="inline-table";this.timeEndMin.disable(!1);this.timeEndMin.dom.style.display="inline-table";this.timeDesc.setLabel(label.periodDesc);this.timeStartHour.setLabel(label.closeTime);this.timeEndHour.setLabel(label.openTime);this.errorStr.END_TIME_SHOULD_EARLY_START_TIME=errStr.inputOpenTimeShouldEarlyClose;this.errorStr.END_TIME_EQUAL_START_TIME=
errStr.inputOpenTimeEqualToClose;this.acrossDay=!0;break;case this.tpType.GUEST_NET:this.timeType=this.TIME_TYPE.PERIOD;this.timeEndHour.disable(!1);this.timeEndHour.dom.style.display="inline-table";this.timeEndMin.disable(!1);this.timeEndMin.dom.style.display="inline-table";this.timeDesc.setLabel(label.periodDesc);this.timeStartHour.setLabel(label.beginTime);this.timeEndHour.setLabel(label.endTime);this.errorStr.END_TIME_SHOULD_EARLY_START_TIME=errStr.inputEndTimeShouldEarlyStart;this.errorStr.END_TIME_EQUAL_START_TIME=
errStr.inputEndTimeEqualToStart;this.acrossDay=!1;break;case this.tpType.REBOOT_TIMER:this.timeType=this.TIME_TYPE.POINT;this.timeEndHour.disable(!0);this.timeEndHour.dom.style.display="none";this.timeEndMin.disable(!0);this.timeEndMin.dom.style.display="none";this.timeDesc.setLabel(label.pointDesc);this.timeStartHour.setLabel(label.rebootTime);this.acrossDay=!1;break;case this.tpType.PARENT_CONTROL:this.timeType=this.TIME_TYPE.PERIOD,this.timeEndHour.disable(!1),this.timeEndHour.dom.style.display=
"inline-table",this.timeEndMin.disable(!1),this.timeEndMin.dom.style.display="inline-table",this.timeDesc.setLabel(label.periodDesc),this.timeStartHour.setLabel(label.beginTime),this.timeEndHour.setLabel(label.endTime),this.errorStr.END_TIME_SHOULD_EARLY_START_TIME=errStr.inputEndTimeShouldEarlyStart,this.errorStr.END_TIME_EQUAL_START_TIME=errStr.inputEndTimeEqualToStart,this.acrossDay=!0}};this.timePeriodDialog.errorStr={END_TIME_SHOULD_EARLY_START_TIME:errStr.inputEndTimeShouldEarlyStart,END_TIME_EQUAL_START_TIME:errStr.inputEndTimeEqualToStart};
this.timePeriodDialog.tpType={TIME_SWITCH:"time_switch",GUEST_NET:"guest_net",REBOOT_TIMER:"reboot_timer",PARENT_CONTROL:"parent_control"};this.timePeriodDialog.TIME_TYPE={PERIOD:"period",POINT:"point"};this.showNewSoftVerDialog=new Dialog({title:label.upgradeOnline,content:'<div class="newSoftVerTitle"><span>'+label.hasNewSoftVer+'</span><span id="newSoftVer"></span></div><div class="newSoftVerContent"><span>'+label.newSoftContent+label.colon+'</span><br /><span id="newSoftContent"></span></div><div id="showNewSoftVerNoShow"></div>',
size:Dialog.SIZE.SMALL,hasCloseIcon:!0,closeIconHandle:function(){var a={};!0==showNewSoftVerDialog.noReDisplay.getValue()&&(a[uciCloudConfig.fileName]={},a[uciCloudConfig.fileName][uciCloudConfig.secName.newFirmware]={},a[uciCloudConfig.fileName][uciCloudConfig.secName.newFirmware][uciCloudConfig.optName.noShow]=uciCloudConfig.optValue.noShow.yes,$.modify(a,void 0,void 0,!0))},type:Dialog.TYPE.NORMAL,isConstant:!0,bottom:[{type:component.Button.TYPE.SECONDARY,text:btn.laterSays,id:"showNewSoftVerCancel",
onClick:function(){$(showNewSoftVerDialog.container).find(".dlgCloseBtn")[0].click()}},{type:component.Button.TYPE.PRIMARY,text:btn.upgradeRightNow,id:"showNewSoftVerSubmit"}],renderCallBack:function(){this.noReDisplay=new CheckBox({targetId:"showNewSoftVerNoShow",label:label.noReDisplay})}});this.showNewSoftVerDialog.isCloudUpgradePush=!1;this.showNewSoftVerDialog.show=function(a){void 0!=a&&$.isPlainObject(a)?(this.isCloudUpgradePush=void 0!=a.isCloudUpgradePush?a.isCloudUpgradePush:!1,$("#showNewSoftVerNoShow").css("display",
this.isCloudUpgradePush?"block":"none"),void 0!=a.newSoftVer?$("#newSoftVer").html(a.newSoftVer):$("#newSoftVer").html("---"),void 0!=a.newSoftContent?$("#newSoftContent").html(a.newSoftContent):$("#newSoftContent").html("---"),this._ops.bottom[1].obj._ops.onClick=void 0!=a.upgradeClick?a.upgradeClick:null):($("#newSoftVer").html("---"),$("#newSoftContent").html("---"),this._ops.bottom[1].obj._ops.onClick=null);Dialog.prototype.show.call(this)};this.cloudPageDialog=new Dialog({hasTitle:!1,content:'<div class="cloudPageTop"><span id="cloudPageBack"><i class="iconfont icon-back"></i><span class="cloudPageBackText">'+
btn.back+'</span></span><i class="dlgCloseBtn iconfont icon-close"></i></div><div class="cloudPageCon" id="cloudPageCon"></div>',size:Dialog.SIZE.LARGE,hasCloseIcon:!1,type:Dialog.TYPE.CUSTOM,isConstant:!0,className:"cloudPage",renderCallBack:function(){$("div.cloudPageTop i.dlgCloseBtn").on("click",function(){cloudPageDialog.hide(function(){id("cloudPageCon").innerHTML=""})})}});this.cloudIDSuggestDialog=new Dialog({title:label.bindMercuryId,content:'<span class="cloudIDSuggestTitle">'+label.cloudIDNoteTitle+
'</span><span class="cloudIDSuggestContent">'+label.cloudIDNoteS+'</span><ul class="cloudIDSuggestContent"><li>'+label.cloudIDNoteT+"</li><li>"+label.cloudIDNoteFo+"</li><li>"+label.cloudIDNoteFi+'</li></ul><div id="cloudIDSuggestNoShow"></div>',hasCloseIcon:!0,size:Dialog.SIZE.MEDIUM,type:Dialog.TYPE.CUSTOM,isConstant:!0,closeIconHandle:function(){var a={};!0==cloudIDSuggestDialog.noReDisplay.getValue()&&(a[uciCloudConfig.fileName]={},a[uciCloudConfig.fileName][uciCloudConfig.secName.bindTip]={},
a[uciCloudConfig.fileName][uciCloudConfig.secName.bindTip][uciCloudConfig.optName.noShow]=uciCloudConfig.optValue.noShow.yes,$.modify(a,void 0,void 0,!0))},bottom:[{type:component.Button.TYPE.SECONDARY,text:btn.ignore,id:"cloudIDSuggestCancel",onClick:function(){$(cloudIDSuggestDialog.container).find(".dlgCloseBtn")[0].click()}},{type:component.Button.TYPE.PRIMARY,text:btn.goAndBind,id:"cloudIDSuggestSubmit",onClick:function(){cloudIDSuggestDialog.hide(function(){cloudHistory.cursor=0;cloudHistory.go(0);
cloudPageDialog.show()})}}],renderCallBack:function(){this.noReDisplay=new CheckBox({targetId:"cloudIDSuggestNoShow",label:label.noReDisplay})}});this.mercuryAppDialog=new Dialog({title:'<i class="appIcon"></i><span class="appTitle">'+label.appName+"</span>",isConstant:!0,closeIconHandle:function(){document.body.style.overflow="auto"},size:Dialog.SIZE.SMALL,type:Dialog.TYPE.CUSTOM,content:'<p class="cloudAppSuggesstionTitle">'+label.scanDownloadAppAndManage+'</p><i class="cloudAppSuggesstionQRCode"></i><div class="cloudAppSuggesstionLogoCon"><div class="cloudAppSuggesstionLogo"><i class="iconfont icon-android"></i><span>Android</span></div><div class="cloudAppSuggesstionLogo"><i class="iconfont icon-ios"></i><span>IOS</span></div></div>',
renderCallBack:function(){attachEvnt(this.container,"click",function(a){stopProp(a)})}});this.mercuryAppDialog.bodyClickHandle=function(a){detachEvnt(document.body,"click",mercuryAppDialog.bodyClickHandle);mercuryAppDialog.hide(function(){})};this.mercuryAppDialog.show=function(a){attachEvnt(document.body,"click",this.bodyClickHandle);Dialog.prototype.show.call(this);stopProp(a)};this.initMeshDialog=function(){void 0!=this.meshTopoDialog&&($(this.meshTopoDialog.horizontalScroll.sb).remove(),$(this.meshTopoDialog.verticalScroll.sb).remove(),
$(this.meshTopoDialog.container).remove(),this.meshTopoDialog=void 0);this.meshTopoDialog=new Dialog({title:btn.meshNetworkingTopo,size:Dialog.SIZE.LARGE,type:Dialog.TYPE.CUSTOM,isConstant:!0,content:'<div class="meshTopoPageCon" id="meshTopoPageCon"><div class="meshTopoCanvasCon"><div id="meshTopoCanvas"></div></div></div>',className:"meshTopoPage",bottom:[{type:component.Button.TYPE.PRIMARY,text:btn.meshAddRouter,id:"meshAddSubmit",props:{width:"160px"},onClick:function(){meshAddDialog.isFromTopo=
!0;meshTopoDialog.hide(function(){meshAddDialog.show()})}}],renderCallBack:function(){var a=new NiceScroll({targetId:"meshTopoPageCon",vertical:!1,zIndex:1006});a.scrollTipOpacity(1);a.init();this.horizontalScroll=a;a=new NiceScroll({targetId:"meshTopoPageCon",zIndex:1006});a.scrollTipOpacity(1);a.init();this.verticalScroll=a}});void 0!=this.meshAddDialog&&($(this.meshAddDialog.container).remove(),this.meshAddDialog=void 0);this.meshAddDialog=new Dialog({title:btn.meshAddRouter,size:Dialog.SIZE.LARGE,
type:Dialog.TYPE.CUSTOM,isConstant:!0,content:'<div class="meshAddTitle"></div><div class="meshAddContent" id="meshAddContent"></div>',className:"meshAddPage",renderCallBack:function(){var a=this;loadDialogRenderPage("meshAddProcess.htm","meshAddContent",function(){$("div.meshAddStep").css("display","none");$("#support_num").text(TECHNICAL_SUPPORT_NUMBER);new Button({type:Button.TYPE.PRIMARY,text:btn.pushedMeshBtn,id:"meshAddReadySub",props:{width:"280px"},onClick:function(){a.startScan()}});new Button({type:Button.TYPE.PRIMARY,
text:btn.reDiscovery,id:"meshAddNoResultRescan",props:{width:"280px"},onClick:function(){a.startScan()}});a.extListTable=new Table({targetId:"extListTable",head:[{field:label.deviceName,width:"0.60"},{field:label.mac,width:"0.40"}],column:[{name:uciPlc.optName.name,type:"str"},{name:uciPlc.optName.mac,type:"str"}],itemOption:[{icon:"icon-add",type:"add",str:btn.add,func:function(b,d){var c={},e;a.tagData.isAddExt=!0;clearTimeout(a.scanResultHandler);c[uciPlc.fileName]={};c[uciPlc.fileName][uciPlc.actionName.addExt]=
{};c[uciPlc.fileName][uciPlc.actionName.addExt][uciPlc.optName.mac]=a.scanedExtList[b].mac;$.action(c,function(b){a.tagData.isAddExt=!1;e=$(a.extListTable.table.rows[d]).find("div.itemOption")[0].parentNode;$(e).empty().append('<i class="meshAddTableLoading spin"></i>');a.scanResultHandler=$.setTimeout(function(){a.scanResultCb.call(a)},2E3)})},onRender:function(a){var d,c="";switch(a.status){case uciPlc.optValue.extStatus.idle:d=!1;break;case uciPlc.optValue.extStatus.waitingToAdd:d=!0;c='<span style="color:#999999">'+
label.meshWaitToAdd+"</span>";break;case uciPlc.optValue.extStatus.adding:d=!0;c='<div class="meshAddItemStatus"><i class="meshAddTableLoading spinOnce"></i><span style="vertical-aligh:middle">'+label.meshAdding+"</span></div>";break;case uciPlc.optValue.extStatus.success:d=!0;c='<span style="color:#24B353">'+label.meshAddSuccess+"</span>";break;case uciPlc.optValue.extStatus.fail:d=!0;c='<div class="meshAddItemStatus error"><i class="iconfont icon-error"></i><span>'+label.meshAddFail+"</span></div>";
break;case uciPlc.optValue.extStatus.timeout:d=!0,c='<div class="meshAddItemStatus error" title='+label.plzClickRouterMeshBtn+'><i class="iconfont icon-error"></i><span>'+label.meshAddTimeout+"</span></div>"}return{result:d,str:c}}}],tableOption:[{icon:"icon-refresh",str:btn.refresh,type:"refresh",func:function(){for(var b=!1,d=0;d<a.scanedExtList.length;d++)if(a.scanedExtList[d].status==uciPlc.optValue.extStatus.waitingToAdd||a.scanedExtList[d].status==uciPlc.optValue.extStatus.adding){b=!0;break}b?
confirmDialog.show({content:label.refreshMeshAddConfirm,callback:function(b){b&&(a.stopScan(),a.startScan())}}):(a.stopScan(),a.startScan())}}],deletable:!1,editable:!1,addable:!1,hasCheckBox:!1,hasFixedHeight:8,numPerPage:8});new Button({type:Button.TYPE.SECONDARY,text:btn.addAll,id:"meshAddAll",props:{width:"200px"},onClick:function(){var b=[],d={},c;a.tagData.isAddExt=!0;clearTimeout(a.scanResultHandler);for(var e=0;e<a.scanedExtList.length;e++)a.scanedExtList[e].status==uciPlc.optValue.extStatus.idle&&
b.push(a.scanedExtList[e].mac);d[uciPlc.fileName]={};d[uciPlc.fileName][uciPlc.actionName.addExt]={};d[uciPlc.fileName][uciPlc.actionName.addExt][uciPlc.optName.mac]=b;$.action(d,function(){a.tagData.isAddExt=!1;inputArr=$(a.extListTable.table).find("div.itemOption");for(e=0;e<inputArr.length;e++)c=inputArr[e].parentNode,$(c).empty().append('<i class="meshAddTableLoading spin"></i>');a.scanResultHandler=$.setTimeout(function(){a.scanResultCb.call(a)},2E3)})}});new Button({type:Button.TYPE.PRIMARY,
text:btn.finish,id:"meshAddcomplete",props:{width:"200px"},onClick:function(){a.finishHandle()}});$("#meshAddNotFoundBtn").click(function(){a.stopScan(!0);a.switchPage(a.page.NOT_FOUND)});new Button({type:Button.TYPE.PRIMARY,text:btn.reDiscovery,id:"meshAddNotFoundRescan",props:{width:"280px"},onClick:function(){a.startScan()}});new Button({type:Button.TYPE.SECONDARY,text:btn.back,id:"meshAddResetBack",props:{width:"200px"},onClick:function(){a.switchPage(a.tagData.lastPage)}});new Button({type:Button.TYPE.PRIMARY,
text:btn.alreadyResetRouter,id:"meshAddResetComplete",props:{width:"200px"},onClick:function(){a.switchPage(a.page.READY)}});$("span.meshAddReset").click(function(){a.switchPage(a.page.RESET)});$(a.container).find(".dlgCloseBtn").off("click").on("click",function(){a.tagData.currentPage==a.page.LOADING?confirmDialog.show({content:label.closeMeshAddConfirm,callback:function(b){b&&(a.stopScan(!0),a.hide())}}):a.tagData.currentPage==a.page.LISTED?a.finishHandle():a.hide()})})}});this.meshAddDialog.isFromTopo=
!1;this.meshAddDialog.scanedExtList=[];this.meshAddDialog.scanStatusHandler=null;this.meshAddDialog.scanResultHandler=null;this.meshAddDialog.tagData={notSuccessExtNum:0,currentPage:null,lastPage:null,isAddExt:!1};this.meshAddDialog.isAddingExt=!1;this.meshAddDialog.show=function(){var a=$(this.container).find("div.dialogTitle span"),b=this;this.isFromTopo?(a.css("cursor","pointer").html('<i class="meshDialogTitle iconfont icon-back"></i><span class="meshDialogTitle">'+btn.meshNetworkingTopo+"</span>"),
a.off("click").on("click",function(){function a(){b.hide(function(){meshTopoDialog.show()})}b.tagData.currentPage==b.page.LOADING?confirmDialog.show({content:label.closeMeshAddConfirm,callback:function(c){c&&(b.stopScan(!0),a())}}):b.tagData.currentPage==b.page.LISTED?b.finishHandle():a()})):(a.css("cursor","default").html(btn.meshAddRouter),a.off("click"));this.switchPage(this.page.READY);Dialog.prototype.show.call(this)};this.meshAddDialog.switchPage=function(a,b){function d(){var b="";switch(a){case c.page.READY:b=
label.prepareRouter;break;case c.page.LOADING:case c.page.NO_RESULT:case c.page.LISTED:b=label.addRouter;break;case c.page.NOT_FOUND:b=label.noFoundRouter;break;case c.page.RESET:b=label.resetRouterConfig}$("div.meshAddTitle").text(b)}var c=this;null!=this.tagData.currentPage?(this.tagData.lastPage=this.tagData.currentPage,$("#"+this.tagData.currentPage).fadeOut(250,function(){c.tagData.currentPage=a;d();$("#"+a).fadeIn(150,function(){"function"==typeof b&&b()})})):(this.tagData.currentPage=a,d(),
$("#"+a).css("display","block"))};this.meshAddDialog.startScan=function(){var a=this,b={};a.switchPage(a.page.LOADING);a.scanedExtList=[];b[uciPlc.fileName]={};b[uciPlc.fileName][uciPlc.actionName.scanExt]=null;$.action(b,function(b){ENONE==b[ERR_CODE]?(a.scanStatusHandler=$.setTimeout(function(){a.scanStatusCb.call(a)},2E3),a.scanResultHandler=$.setTimeout(function(){a.scanResultCb.call(a)},2E3)):a.scanOverHandle()},void 0,!0)};this.meshAddDialog.stopScan=function(a){var b={};clearTimeout(this.scanStatusHandler);
clearTimeout(this.scanResultHandler);this.scanedExtList=[];void 0!=a&&!0==a&&(b[uciPlc.fileName]={},b[uciPlc.fileName][uciPlc.actionName.stopScanExt]=null,$.action(b))};this.meshAddDialog.scanStatusCb=function(){var a=this,b={};b[uciPlc.fileName]={};b[uciPlc.fileName][KEY_NAME]=uciPlc.secName.scanExtStatus;$.query(b,function(b){ENONE==b[ERR_CODE]?b[uciPlc.fileName][uciPlc.secName.scanExtStatus][uciPlc.optName.status]==uciPlc.optValue.status.doing?a.scanStatusHandler=$.setTimeout(function(){a.scanStatusCb.call(a)},
2E3):a.scanOverHandle():a.scanOverHandle()})};this.meshAddDialog.scanResultCb=function(){var a=this,b={};b[uciPlc.fileName]={};b[uciPlc.fileName][KEY_TABLE]=uciPlc.secType.scannedExt;$.query(b,function(b){if(!a.isAddingExt){a.scanedExtList=formatTableData(b[uciPlc.fileName][uciPlc.secType.scannedExt]);$("#routerFoundCount").text(a.scanedExtList.length);if(0<a.scanedExtList.length){for(b=a.tagData.notSuccessExtNum=0;b<a.scanedExtList.length;b++)a.scanedExtList[b].status!=uciPlc.optValue.extStatus.idle&&
a.scanedExtList[b].status!=uciPlc.optValue.extStatus.success&&(a.tagData.notSuccessExtNum+=1);a.scanedExtList.sort(function(a,b){return a.mac>b.mac?1:-1});a.extListTable.setDataSource(a.scanedExtList);a.extListTable.loadData();a.tagData.currentPage!=a.page.LISTED&&a.switchPage(a.page.LISTED)}a.scanResultHandler=$.setTimeout(function(){a.scanResultCb.call(a)},2E3)}})};this.meshAddDialog.finishHandle=function(){for(var a=this,b=!1,d=0,c=0;c<a.scanedExtList.length;c++){if(a.scanedExtList[c].status==
uciPlc.optValue.extStatus.waitingToAdd||a.scanedExtList[c].status==uciPlc.optValue.extStatus.adding){b=!0;break}a.scanedExtList[c].status==uciPlc.optValue.extStatus.idle&&d++}b?confirmDialog.show({content:label.finishMeshAddConfirmOne,callback:function(b){b&&(a.stopScan(!0),a.hide(function(){meshTopoDialog.show()}))}}):0<d?confirmDialog.show({content:label.finishMeshAddConfirmTwo+d+label.finishMeshAddConfirmThree,callback:function(b){b&&(a.stopScan(!0),a.hide(function(){meshTopoDialog.show()}))}}):
(a.stopScan(!0),a.hide(function(){meshTopoDialog.show()}))};this.meshAddDialog.scanOverHandle=function(){function a(){alarmDialog.show({title:label.meshAddTimeout,content:d,callback:function(){b.isFromTopo?b.hide(function(){meshTopoDialog.show()}):b.hide()}})}var b=this,d="";b.stopScan();b.tagData.currentPage==b.page.LOADING?b.switchPage(b.page.NO_RESULT):(d=label.addingTimeoutOne,d=0==b.tagData.notSuccessExtNum?d+(label.addingTimeoutTwo+label.addingTimeoutFive):d+(label.addingTimeoutThree+b.tagData.notSuccessExtNum+
label.addingTimeoutFour+label.addingTimeoutFive),"showed"==confirmDialog.status?confirmDialog.hide(function(){a()}):a())};this.meshAddDialog.page={READY:"meshAddReady",LOADING:"meshAddLoading",NO_RESULT:"meshAddNoResult",LISTED:"meshAddListed",NOT_FOUND:"meshAddNotFound",RESET:"meshAddReset"}}};componentObj.call(window);
